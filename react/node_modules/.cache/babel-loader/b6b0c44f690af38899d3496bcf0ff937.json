{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jy/Desktop/chatdemo-react/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jy/Desktop/chatdemo-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jy/Desktop/chatdemo-react/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Axios from'axios';import React,{useState,useEffect}from'react';import{useSetRecoilState}from'recoil';import{RoomId}from'../atoms';function Room(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),roomName=_useState4[0],setRoomName=_useState4[1];var setRoomId=useSetRecoilState(RoomId);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get('http://localhost:8080/chat/rooms');case 2:response=_context.sent;setRooms(response.data);// 데이터는 response.data 안에 들어있습니다.\ncase 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[rooms]);var onChange=function onChange(e){setRoomName(e.target.value);// 우선 e.target 에서 name 과 value 를 추출\n};var createRoom=function createRoom(){console.log(roomName);if(roomName===''){alert('이름을 입력하세요!');return;}Axios.post(\"http://localhost:8080/chat/room?name=\".concat(roomName)).then(function(res){console.log(res);}).catch(function(e){alert(\"개설 실패\"+e);});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Hey, there!\"),/*#__PURE__*/React.createElement(\"label\",null,\" \\uBC29 \\uC81C\\uBAA9 : \\xA0\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",onKeyUp:onChange,placeholder:\"\\uC5EC\\uAE30\\uC5D0 \\uBC29\\uC81C\\uB97C \\uC785\\uB825\",onKeyPress:function onKeyPress(e){if(e.key===\"Enter\"){createRoom();}}}),/*#__PURE__*/React.createElement(\"button\",{onClick:createRoom},\"\\uAC1C\\uC124\")),/*#__PURE__*/React.createElement(\"ul\",null,rooms.map(function(room){return/*#__PURE__*/React.createElement(\"li\",{key:room.roomId,onClick:function onClick(){return setRoomId(room.roomId);}},room.name);})));}export default Room;","map":{"version":3,"sources":["/Users/jy/Desktop/chatdemo-react/src/components/Room.js"],"names":["Axios","React","useState","useEffect","useSetRecoilState","RoomId","Room","rooms","setRooms","roomName","setRoomName","setRoomId","fetchData","get","response","data","onChange","e","target","value","createRoom","console","log","alert","post","then","res","catch","key","map","room","roomId","name"],"mappings":"sVAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAASC,iBAAT,KAAkC,QAAlC,CACA,OAAQC,MAAR,KAAqB,UAArB,CAEA,QAASC,CAAAA,IAAT,EAAgB,eACYJ,QAAQ,CAAC,EAAD,CADpB,wCACPK,KADO,eACAC,QADA,8BAEkBN,QAAQ,CAAC,EAAD,CAF1B,yCAEPO,QAFO,eAEGC,WAFH,eAGd,GAAMC,CAAAA,SAAS,CAAGP,iBAAiB,CAACC,MAAD,CAAnC,CAEA,GAAMO,CAAAA,SAAS,0FAAG,sKACOZ,CAAAA,KAAK,CAACa,GAAN,CACrB,kCADqB,CADP,QACVC,QADU,eAIhBN,QAAQ,CAACM,QAAQ,CAACC,IAAV,CAAR,CAAyB;AAJT,sDAAH,kBAATH,CAAAA,SAAS,0CAAf,CAOAT,SAAS,CAAC,UAAM,CACdS,SAAS,GACV,CAFQ,CAEP,CAACL,KAAD,CAFO,CAAT,CAIA,GAAMS,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACtBP,WAAW,CAACO,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX,CAA6B;AAC9B,CAFD,CAKA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBC,OAAO,CAACC,GAAR,CAAYb,QAAZ,EACA,GAAIA,QAAQ,GAAK,EAAjB,CAAoB,CAClBc,KAAK,CAAC,YAAD,CAAL,CACA,OACD,CACDvB,KAAK,CAACwB,IAAN,gDAAmDf,QAAnD,GACCgB,IADD,CACM,SAAAC,GAAG,CAAE,CACPL,OAAO,CAACC,GAAR,CAAYI,GAAZ,EACD,CAHH,EAIEC,KAJF,CAIQ,SAAAV,CAAC,CAAE,CACTM,KAAK,CAAC,QAAUN,CAAX,CAAL,CACC,CANH,EAQD,CAdD,CAgBA,mBACE,4CACI,4CADJ,cAEI,4EACA,6BAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,MAAxB,CAA+B,OAAO,CAAED,QAAxC,CAAkD,WAAW,CAAC,oDAA9D,CAA2E,UAAU,CAAE,oBAAAC,CAAC,CAAE,CACxF,GAAIA,CAAC,CAACW,GAAF,GAAU,OAAd,CAAsB,CACpBR,UAAU,GACX,CACF,CAJD,EADA,cAKI,8BAAQ,OAAO,CAAEA,UAAjB,iBALJ,CAFJ,cASI,8BACGb,KAAK,CAACsB,GAAN,CAAU,SAAAC,IAAI,qBACb,0BAAI,GAAG,CAAEA,IAAI,CAACC,MAAd,CAAsB,OAAO,CAAE,yBAAIpB,CAAAA,SAAS,CAACmB,IAAI,CAACC,MAAN,CAAb,EAA/B,EACGD,IAAI,CAACE,IADR,CADa,EAAd,CADH,CATJ,CADF,CAkBD,CAED,cAAe1B,CAAAA,IAAf","sourcesContent":["import Axios from 'axios';\nimport React, {useState, useEffect} from 'react';\nimport { useSetRecoilState } from 'recoil';\nimport {RoomId} from '../atoms'\n\nfunction Room() {\n  const [rooms, setRooms] = useState([])\n  const [roomName, setRoomName] = useState('')\n  const setRoomId = useSetRecoilState(RoomId)\n\n  const fetchData = async () => {\n    const response = await Axios.get(\n      'http://localhost:8080/chat/rooms'\n    );\n    setRooms(response.data); // 데이터는 response.data 안에 들어있습니다.\n  };\n\n  useEffect(() => {\n    fetchData();\n  },[rooms]);\n\n  const onChange = (e) => {\n    setRoomName(e.target.value); // 우선 e.target 에서 name 과 value 를 추출\n  };\n\n\n  const createRoom = () => {\n    console.log(roomName)\n    if (roomName === ''){\n      alert('이름을 입력하세요!')\n      return\n    }\n    Axios.post(`http://localhost:8080/chat/room?name=${roomName}`)\n    .then(res=>{\n        console.log(res)\n      }\n    ).catch(e=>{\n      alert(\"개설 실패\" + e)\n      }\n    )\n  }\n\n  return (\n    <div>\n        <h1>Hey, there!</h1>\n        <label> 방 제목 : &nbsp;\n        <input type=\"text\" name=\"name\" onKeyUp={onChange} placeholder=\"여기에 방제를 입력\" onKeyPress={e=>{\n          if (e.key === \"Enter\"){\n            createRoom()\n          }\n        }}/><button onClick={createRoom}>개설</button>\n        </label>\n        <ul>\n          {rooms.map(room => \n            <li key={room.roomId} onClick={()=>setRoomId(room.roomId)}>\n              {room.name}\n            </li>)}\n        </ul>\n    </div>\n  );\n}\n\nexport default Room\n"]},"metadata":{},"sourceType":"module"}