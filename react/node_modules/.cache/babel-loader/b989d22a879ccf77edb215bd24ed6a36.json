{"ast":null,"code":"var _jsxFileName = \"/Users/jy/Desktop/chatdemo-react/src/components/Chat.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport Axios from 'axios';\nimport { useRecoilValue } from 'recoil';\nimport { RoomId } from '../atoms';\nimport SockJsClient from 'react-stomp';\n\nfunction Chat() {\n  const $websocket = useRef(null);\n  const roomId = useRecoilValue(RoomId);\n  const [room, setRoom] = useState('');\n  const [sender, setSender] = useState('');\n  const [chat, setChat] = useState('');\n  const [msgs, setMsgs] = useState([]);\n  useEffect(() => {\n    setSender('Guest'); //setSender(prompt(\"여기에 이름을 입력\"))\n  }, []);\n  useEffect(() => {\n    if (roomId !== '') {\n      Axios.get(`http://localhost:8080/chat/room/${roomId}`).then(res => {\n        console.log(\"res : \" + res.data);\n        setRoom(res.data);\n      });\n    }\n  }, [roomId]);\n\n  const recvMessage = recv => {};\n\n  const sendMessage = () => {\n    if (chat != '') $websocket.current.sendMessage(\"/pub/chat/message\", {}, {\n      type: 'TALK',\n      roomId: roomId,\n      sender: sender,\n      message: chat\n    });\n  };\n\n  const onChange = e => {\n    setChat(e.target.value); // 우선 e.target 에서 name 과 value 를 추출\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, \"\\uBC29\\uC81C : \", room.name), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, \"\\uB098 : \", sender), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    onKeyUp: onChange,\n    placeholder: \"\\uC5EC\\uAE30\\uC5D0 \\uBA54\\uC138\\uC9C0 \\uC785\\uB825\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 89\n    }\n  }, \"\\uBCF4\\uB0B4\\uAE30\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, msgs.map(msg => /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 34\n    }\n  }, msg))), /*#__PURE__*/React.createElement(SockJsClient, {\n    url: \"http://localhost:8080/ws-stomp\",\n    topic: [],\n    onMessage: msg => {\n      console.log(msg);\n    },\n    ref: $websocket,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default Chat;","map":{"version":3,"sources":["/Users/jy/Desktop/chatdemo-react/src/components/Chat.js"],"names":["React","useState","useEffect","useRef","Axios","useRecoilValue","RoomId","SockJsClient","Chat","$websocket","roomId","room","setRoom","sender","setSender","chat","setChat","msgs","setMsgs","get","then","res","console","log","data","recvMessage","recv","sendMessage","current","type","message","onChange","e","target","value","name","map","msg"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef} from 'react'\nimport Axios from 'axios';\nimport { useRecoilValue } from 'recoil';\nimport {RoomId} from '../atoms'\nimport SockJsClient from 'react-stomp'\n\nfunction Chat(){\n\n    const $websocket = useRef(null)\n    \n    const roomId = useRecoilValue(RoomId)\n\n    const [room, setRoom] = useState('')\n    const [sender, setSender] = useState('')\n\n    const [chat, setChat] = useState('')\n    const [msgs, setMsgs] = useState([])\n    \n    useEffect(()=>{\n        setSender('Guest')\n        //setSender(prompt(\"여기에 이름을 입력\"))\n    },[])\n\n    useEffect(() => {\n        if (roomId !== ''){\n            Axios.get(`http://localhost:8080/chat/room/${roomId}`)\n            .then(res=> { \n                console.log(\"res : \" + res.data)\n                setRoom(res.data) \n            });\n        }\n    },[roomId])\n    \n    const recvMessage = (recv) => {\n\n    }\n\n    const sendMessage = () => {\n        if (chat != '')\n            $websocket.current.sendMessage(\"/pub/chat/message\"\n            , {} , {type:'TALK', roomId:roomId, sender:sender, message:chat}\n            )\n    }\n\n    const onChange = (e) => {\n        setChat(e.target.value); // 우선 e.target 에서 name 과 value 를 추출\n      };\n    \n    return (\n        <div> \n            <h1>방제 : {room.name}</h1>\n            <h2>나 : {sender}</h2>\n            <input type=\"text\" name=\"name\" onKeyUp={onChange} placeholder=\"여기에 메세지 입력\"/><button onClick={sendMessage}>보내기</button>\n            <ul>\n                {msgs.map(msg => <li>{msg}</li>)}\n            </ul>\n            <SockJsClient \n                url=\"http://localhost:8080/ws-stomp\"\n                topic={[]}\n                onMessage={msg => { console.log (msg); }}\n                ref={$websocket}\n                />\n        </div>\n    )\n}\n\n\nexport default Chat\n\n\n"]},"metadata":{},"sourceType":"module"}